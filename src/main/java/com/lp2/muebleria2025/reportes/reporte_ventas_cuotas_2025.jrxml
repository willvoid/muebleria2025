<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 7.0.1.final using JasperReports Library version 5.1.0  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="reporte_compras" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="d0ba1e6a-8843-4068-aa33-ed96b82b3270">
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="New Data Adapter"/>
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<subDataset name="reporte_compras" uuid="524527e0-e191-4175-bf94-d7731d0c695e">
		<property name="com.jaspersoft.studio.data.defaultdataadapter" value="New Data Adapter"/>
		<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
		<queryString>
			<![CDATA[select idcompras, fecha_compra, nombre, descripcion, cantidad, precio_compra,subtotal 
from compras co
inner join detalle_compras d
on co.idcompras = d.compra_id
inner join proveedores pr
on pr.id = co.idproveedor
order by idcompras asc]]>
		</queryString>
		<field name="idcompras" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.name" value="idcompras"/>
			<property name="com.jaspersoft.studio.field.label" value="idcompras"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="compras"/>
		</field>
		<field name="fecha_compra" class="java.sql.Date">
			<property name="com.jaspersoft.studio.field.name" value="fecha_compra"/>
			<property name="com.jaspersoft.studio.field.label" value="fecha_compra"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="compras"/>
		</field>
		<field name="nombre" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.name" value="nombre"/>
			<property name="com.jaspersoft.studio.field.label" value="nombre"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="proveedores"/>
		</field>
		<field name="descripcion" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.name" value="descripcion"/>
			<property name="com.jaspersoft.studio.field.label" value="descripcion"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="detalle_compras"/>
		</field>
		<field name="cantidad" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.name" value="cantidad"/>
			<property name="com.jaspersoft.studio.field.label" value="cantidad"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="detalle_compras"/>
		</field>
		<field name="precio_compra" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.name" value="precio_compra"/>
			<property name="com.jaspersoft.studio.field.label" value="precio_compra"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="detalle_compras"/>
		</field>
		<field name="subtotal" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.name" value="subtotal"/>
			<property name="com.jaspersoft.studio.field.label" value="subtotal"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="detalle_compras"/>
		</field>
	</subDataset>
	<parameter name="desde" class="java.sql.Date"/>
	<parameter name="hasta" class="java.sql.Date"/>
	<queryString>
		<![CDATA[SELECT 
    v.idventas, v.fecha_venta,
    c.nombre,
    STRING_AGG(dv.descripcion || '  x  ' || dv.cantidad, E'\n') AS descripcion_productos,
    SUM(dv.cantidad) AS cantidad_total, u.nombre || ' ' || u.apellido AS Vendedor, v.total
FROM ventas v
INNER JOIN detalle_ventas dv ON v.idventas = dv.venta_id
INNER JOIN cliente c ON c.id = v.idcliente
INNER JOIN usuario u ON u.id = idusuario
WHERE fecha_venta >= $P{desde} AND fecha_venta <=$P{hasta} AND tipo_f = 'Financiado'
GROUP BY v.idventas, c.nombre, u.nombre, u.apellido;]]>
	</queryString>
	<field name="idventas" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.name" value="idventas"/>
		<property name="com.jaspersoft.studio.field.label" value="idventas"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="ventas"/>
	</field>
	<field name="fecha_venta" class="java.sql.Date">
		<property name="com.jaspersoft.studio.field.name" value="fecha_venta"/>
		<property name="com.jaspersoft.studio.field.label" value="fecha_venta"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="ventas"/>
	</field>
	<field name="nombre" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="nombre"/>
		<property name="com.jaspersoft.studio.field.label" value="nombre"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="cliente"/>
	</field>
	<field name="descripcion_productos" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="descripcion_productos"/>
		<property name="com.jaspersoft.studio.field.label" value="descripcion_productos"/>
	</field>
	<field name="cantidad_total" class="java.lang.Long">
		<property name="com.jaspersoft.studio.field.name" value="cantidad_total"/>
		<property name="com.jaspersoft.studio.field.label" value="cantidad_total"/>
	</field>
	<field name="vendedor" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="vendedor"/>
		<property name="com.jaspersoft.studio.field.label" value="vendedor"/>
	</field>
	<field name="total" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.name" value="total"/>
		<property name="com.jaspersoft.studio.field.label" value="total"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="ventas"/>
	</field>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="120" splitType="Stretch">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<textField pattern="MMMMM dd, yyyy">
				<reportElement x="460" y="0" width="100" height="30" uuid="72f884f0-4ab3-4c8e-b0ca-9e2347a97437"/>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<textField pattern="HH:mm">
				<reportElement x="460" y="12" width="100" height="30" uuid="aac0433d-c78f-4ce0-bdfc-d1b900dcf351"/>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="366" y="-1" width="100" height="30" uuid="fdfc4be3-26fd-462e-8438-3af9788fc7f9"/>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Fecha y hora de impresión:]]></text>
			</staticText>
		</band>
	</title>
	<pageHeader>
		<band height="80" splitType="Stretch">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<staticText>
				<reportElement mode="Opaque" x="-20" y="25" width="595" height="30" forecolor="#FFFFFF" backcolor="#D13F2D" uuid="a92e82cf-bcc2-4ab2-a0d0-2da616de0c09"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="15" isBold="true"/>
				</textElement>
				<text><![CDATA[Reporte de Ventas - VG Mueblería]]></text>
			</staticText>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="82">
			<staticText>
				<reportElement mode="Opaque" x="-15" y="47" width="30" height="30" forecolor="#FFFFFF" backcolor="#000203" uuid="cc46bf17-6d56-42ac-baa0-fd4c027155ff"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[N°]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="15" y="47" width="45" height="30" forecolor="#FFFFFF" backcolor="#000203" uuid="f9383a60-7496-46bc-8539-b63c021f211a"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Fecha]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="60" y="47" width="122" height="30" forecolor="#FFFFFF" backcolor="#000203" uuid="b0fc7cee-1089-4756-b28a-3727c3011152"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Cliente]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="182" y="47" width="214" height="30" forecolor="#FFFFFF" backcolor="#000203" uuid="4e83a2e9-a87c-42ee-8ba1-5f957cbfe5b4"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Descripción]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="519" y="47" width="51" height="30" forecolor="#FFFFFF" backcolor="#000203" uuid="833aa71b-00b0-42b9-96ed-2d06a8203202"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Total Venta]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="396" y="47" width="123" height="30" forecolor="#FFFFFF" backcolor="#000203" uuid="e234c6f4-b810-45d0-8591-62f2a1ae549a"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Vendedor]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="74" splitType="Stretch">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<line>
				<reportElement x="-10" y="66" width="575" height="1" uuid="f557b7f0-eedd-4e35-9c91-e6523e1e6e6a">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
			</line>
			<textField>
				<reportElement x="-15" y="5" width="30" height="30" uuid="357e6711-21fb-4e57-8a34-79e751a58cc0">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="1ca004d7-23bf-47a0-911b-b27e827405c8"/>
				</reportElement>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{idventas}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="15" y="5" width="45" height="15" uuid="b9c6325b-1e0b-4171-a2e8-b3e28cc2c494">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="cbab26cb-c441-481d-a2e9-5b4de6490798"/>
				</reportElement>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{fecha_venta}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="182" y="5" width="214" height="61" uuid="44227aa1-3b97-4155-9f8c-4956d2d0e156">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="275c54b4-44d9-4f9a-8b92-ea8206f48e26"/>
				</reportElement>
				<textElement textAlignment="Center" verticalAlignment="Top"/>
				<textFieldExpression><![CDATA[$F{descripcion_productos}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="60" y="5" width="122" height="30" uuid="1d33cae1-005b-42b8-b627-36f3c26491c0">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="8fe661dd-2581-49dc-9325-9522fd47c288"/>
				</reportElement>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{nombre}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="396" y="5" width="123" height="30" uuid="e9917d4d-958e-4cda-9cfc-78088d37dc5e">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="722403c9-2448-44ba-8159-b5660ee0457d"/>
				</reportElement>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{vendedor}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="520" y="5" width="50" height="30" uuid="615904fb-74df-49e3-a9ad-c6479dd398d1">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="edfc48b1-3915-4843-a12f-615ffa1ca878"/>
				</reportElement>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{total}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
